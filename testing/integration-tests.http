@SampleExtension_Web_HostAddress = https://localhost:7001

###

# Test basic note processing
POST {{SampleExtension_Web_HostAddress}}/v1/process
Content-Type: application/json
Accept: application/json

{
  "sessionData": {
    "session_start": "2025-07-31T13:50:00.000Z",
    "correlation_id": "test-correlation-123",
    "environment_id": "test-environment-456"
  },
  "note": {
    "payload_version": "1.1.0",
    "schema_version": "0.1",
    "language": "en-US",
    "encounter": {
      "correlation_id": "encounter-123",
      "external_encounter_id": "ENC-12345",
      "status": "complete",
      "date_of_encounter": "2025-07-31T13:50:00.000Z",
      "patient": {
        "name_details": {
          "given_name": "John",
          "family_name": "Doe"
        },
        "gender": "Male",
        "medical_record_number": "MRN-123456",
        "external_patient_id": "PAT-789"
      },
      "practitioner": {
        "full_name": "Dr. Jane Smith",
        "user_id": "USER-456"
      }
    },
    "document": {
      "title": "Progress Note",
      "type": {
        "text": "Progress Note"
      }
    },
    "resources": [
      {
        "legacy_id": "section-1",
        "content": "Patient reports diabetes is well controlled with metformin. Blood pressure elevated at 145/90."
      }
    ]
  }
}

###

# Test with enhanced encounter data (new API features)
POST {{SampleExtension_Web_HostAddress}}/v1/process
Content-Type: application/json
Accept: application/json

{
  "sessionData": {
    "session_start": "2025-07-31T13:50:00.000Z",
    "correlation_id": "test-correlation-enhanced-123",
    "environment_id": "test-environment-456"
  },
  "note": {
    "payload_version": "1.1.0",
    "schema_version": "0.1",
    "language": "en-US",
    "encounter": {
      "correlation_id": "encounter-enhanced-123",
      "external_encounter_ids": [
        {
          "identifier": "ENC-12345",
          "type": "MRN"
        },
        {
          "identifier": "CSN-67890",
          "type": "CSN"
        }
      ],
      "status": "complete",
      "date_of_encounter": "2025-07-31T13:50:00.000Z",
      "service_date": "2025-07-31T13:00:00.000Z",
      "patient": {
        "name_details": {
          "given_name": "John",
          "family_name": "Doe"
        },
        "gender": "Male",
        "pronoun_preference": {
          "description": "he/him/his/his/himself",
          "identifier": "LA29518-0",
          "system": "loinc.org"
        },
        "medical_record_number": "MRN-123456",
        "external_patient_id": "PAT-789"
      },
      "practitioner": {
        "full_name": "Dr. Jane Smith",
        "user_id": "USER-456",
        "npi": 1234567890,
        "external_practitioner_ids": [
          {
            "identifier": "DOC-123",
            "type": "INTERNAL"
          }
        ]
      }
    },
    "document": {
      "title": "Progress Note",
      "type": {
        "text": "Progress Note"
      }
    },
    "resources": [
      {
        "legacy_id": "section-1",
        "content": "Patient reports diabetes type 2 is well controlled with metformin 500mg twice daily. Blood pressure elevated at 145/90 mmHg. Patient has allergies to penicillin and sulfa drugs. Recommending lifestyle modifications and follow-up in 3 months."
      }
    ]
  }
}

###

# Test with transcript data
POST {{SampleExtension_Web_HostAddress}}/v1/process
Content-Type: application/json
Accept: application/json

{
  "sessionData": {
    "session_start": "2025-07-31T14:00:00.000Z",
    "correlation_id": "test-transcript-123",
    "environment_id": "test-environment-456"
  },
  "transcript": {
    "payload_version": "2.2.0",
    "schema_version": "0.1",
    "language": "en-US",
    "encounter": {
      "correlation_id": "encounter-transcript-123",
      "external_encounter_ids": [
        {
          "identifier": "ENC-67890",
          "type": "MRN"
        }
      ],
      "status": "complete",
      "date_of_encounter": "2025-07-31T14:00:00.000Z",
      "patient": {
        "name_details": {
          "given_name": "Alice",
          "family_name": "Johnson"
        },
        "gender": "Female",
        "medical_record_number": "MRN-789012"
      },
      "practitioner": {
        "full_name": "Dr. Michael Chen",
        "user_id": "USER-789",
        "npi": 9876543210
      }
    },
    "recordings": [
      {
        "id": "recording-001",
        "first_turn": 0,
        "last_turn": 3,
        "length": "00:05:30",
        "creation_date": "2025-07-31T14:00:00.000Z"
      }
    ],
    "transcript": {
      "speaker_count": 2,
      "turns": [
        {
          "index": 0,
          "speaker": "Clinician",
          "text": "Good morning, Alice. How are you feeling today?",
          "start_time": "00:00:00.000",
          "end_time": "00:00:03.500"
        },
        {
          "index": 1,
          "speaker": "Patient",
          "text": "I've been having some chest pain and shortness of breath.",
          "start_time": "00:00:04.000",
          "end_time": "00:00:08.200"
        },
        {
          "index": 2,
          "speaker": "Clinician",
          "text": "When did these symptoms start? Are they related to activity?",
          "start_time": "00:00:09.000",
          "end_time": "00:00:13.000"
        },
        {
          "index": 3,
          "speaker": "Patient",
          "text": "They started about a week ago, mostly when I climb stairs or walk quickly.",
          "start_time": "00:00:14.000",
          "end_time": "00:00:18.500"
        }
      ],
      "webVTT": "WEBVTT\n\n00:00:00.000 --> 00:00:03.500\nClinician: Good morning, Alice. How are you feeling today?\n\n00:00:04.000 --> 00:00:08.200\nPatient: I've been having some chest pain and shortness of breath.\n\n00:00:09.000 --> 00:00:13.000\nClinician: When did these symptoms start? Are they related to activity?\n\n00:00:14.000 --> 00:00:18.500\nPatient: They started about a week ago, mostly when I climb stairs or walk quickly."
    }
  }
}

###
